    @model MarketZone.ViewModels.Ad.AdCreateModel

    <!-- Title -->
    <div class="mb-3">
        <label asp-for="Title"></label>
        <input asp-for="Title" class="form-control" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <!-- Description -->
    <div class="mb-3">
        <label asp-for="Description"></label>
        <textarea asp-for="Description" class="form-control" rows="6"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <!-- Price + Currency -->
    <div class="row mb-3">
        <div class="col-md-8">
            <label asp-for="Price"></label>
            <input asp-for="Price" class="form-control" />
            <span asp-validation-for="Price" class="text-danger"></span>
        </div>
        <div class="col-md-4">
            <label asp-for="Currency"></label>
            <select asp-for="Currency"
                    class="form-select"
                    asp-items="Html.GetEnumSelectList<MarketZone.Data.Enums.Currency>()">
            </select>
        </div>
    </div>

    <!-- Address -->
<!-- Address -->
<div class="mb-3">
    <label class="form-label">Address</label>
    <div class="address-picker-wrapper">
        <div class="address-input-wrapper">
            <span class="address-icon">📍</span>
            <!-- ✅ name="Address" here — no separate hidden field needed -->
            <input type="text"
                   id="address-input"
                   name="Address"
                   class="form-control"
                   placeholder="Start typing an address..."
                   value="@Model.Address"
                   autocomplete="off" />
            <div id="address-loading" class="address-loading"></div>
        </div>
        <div id="address-suggestions" class="address-suggestions"></div>
    </div>
    <input type="hidden" id="Latitude" name="Latitude" value="@Model.Latitude" />
    <input type="hidden" id="Longitude" name="Longitude" value="@Model.Longitude" />
    <span asp-validation-for="Address" class="text-danger"></span>
    <div id="address-map-preview" class="address-map-preview">
        <div id="address-map"></div>
    </div>
    <div id="address-confirmed-badge" class="address-confirmed-badge">
        ✅ Address confirmed
    </div>
</div>

    <!-- Category picker -->
    <div class="mb-3">
        <label>Category</label>

        <div class="border rounded p-2">
            <div class="d-flex align-items-center mb-2">
                <button type="button"
                        id="back-btn"
                        class="btn btn-sm btn-outline-secondary me-2"
                        style="display:none;">
                    ← Back
                </button>

                <span id="breadcrumb" class="text-muted"></span>
            </div>

            <ul id="category-list" class="list-unstyled mb-0"></ul>
        </div>

        <input type="hidden" asp-for="CategoryId" id="CategoryId" /> 
        <span asp-validation-for="CategoryId" class="text-danger"></span>
    </div>

    <!-- Images -->
    <div class="mb-3">
        <label class="d-block">Images (up to 10)</label>

        <input asp-for="Images"
               type="file"
               id="image-input"
               multiple
               accept="image/*"
               class="d-none" />

        <div id="image-grid" class="image-grid"></div>

        <span asp-validation-for="Images" class="text-danger"></span>
    </div>

    <!-- Condition -->
    <div class="mb-3">
        <label class="form-label d-block">Condition</label>

        <div class="condition-toggle">
            <input type="radio" class="btn-check" asp-for="Condition" value="New" id="condition-new" />
            <label class="condition-btn" for="condition-new">New</label>

            <input type="radio" class="btn-check" asp-for="Condition" value="Used" id="condition-used" />
            <label class="condition-btn" for="condition-used">Used</label>
        </div>

        <span asp-validation-for="Condition" class="text-danger"></span>
    </div>

    <!-- Tags -->
    <div class="mb-3">
        <label asp-for="Tags"></label>
        <input asp-for="Tags" class="form-control" placeholder="e.g. phone, samsung" />
    </div>
    @for (int i = 0; i < Model.ExistingImageUrls.Count; i++)
    {
        <input type="hidden"
               name="ExistingImageUrls[@i]"
               value="@Model.ExistingImageUrls[i]" />
    }
<script>
    window.adFormConfig = {
        existingImages: @Html.Raw(System.Text.Json.JsonSerializer
            .Serialize(Model.ExistingImageUrls))
    };
</script>
